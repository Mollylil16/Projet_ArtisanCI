<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil - ArtisanCI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Barre de navigation -->
    <nav class="bg-blue-600 shadow-md p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-white">ArtisanCI</h1>
            <div>
                <a href="acceuil.html" class="text-white hover:text-blue-100 mx-2">Accueil</a>
                <a href="dashboard_artisan.html" class="text-white hover:text-blue-100 mx-2">Tableau de bord</a>
                <a href="#" id="logout" class="text-white hover:text-blue-100 mx-2">Déconnexion</a>
            </div>
        </div>
    </nav>

    <!-- Catalogue des publications -->
    <div class="container mx-auto p-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">Catalogue des Réalisations</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="catalogue">
            <!-- Les réalisations seront injectées ici dynamiquement -->
        </div>
    </div>

    <script>
        // Données des artisans et leurs réalisations
        const artisans = [
            {
                name: "Colonel Watao",
                domaine: "Menuiserie",
                realisations: [
                    {
                        title: "Table basse en chêne",
                        description: "Table basse en chêne massif avec finition à l'huile naturelle.",
                        image: "images/Table.webp" // Chemin de l'image
                    },
                    {
                        title: "Armoire en bois",
                        description: "Armoire en bois massif avec portes coulissantes.",
                        image: "images/armoire.jpg" // Chemin de l'image
                    }
                ]
            },
            {
                name: "Malick Dominique",
                domaine: "Plomberie",
                realisations: [
                    {
                        title: "Installation de salle de bain",
                        description: "Installation complète d'une salle de bain moderne.",
                        image: "images/douche-1.png" // Chemin de l'image
                    }
                ]
            },
            {
                name: "Vry Aka",
                domaine: "Electricien",
                realisations: [
                    {
                        title: "Maintenance",
                        description: "Reglage de tout sorte de probleme concernant l'electricité",
                        image: "images/electricien.webp" // Chemin de l'image (ajoutez l'extension correcte)
                    }
                ]
            },
            {
                name: "Kone Salim",
                domaine: "peintre",
                realisations: [
                    {
                        title: "Excellent peintre",
                        description: "Present pour apporter vie a votre maison a travers mon art.",
                        image: "images/peinture.jpeg" // Chemin de l'image
                    }
                ]
            }
        ];

        // Fonction pour générer le catalogue
        function genererCatalogue() {
            const catalogue = document.getElementById('catalogue'); // Sélectionne la section du catalogue
            catalogue.innerHTML = ''; // Vide le contenu existant

            // Parcourir chaque artisan
            artisans.forEach(artisan => {
                // Parcourir chaque réalisation de l'artisan
                artisan.realisations.forEach(realisation => {
                    // Créer une carte pour chaque réalisation
                    const card = `
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                            <img src="${realisation.image}" alt="${realisation.title}" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <h3 class="font-semibold">${realisation.title}</h3>
                                <p class="text-gray-600 text-sm mt-2">${realisation.description}</p>
                                <div class="flex justify-between items-center mt-4">
                                    <span class="text-sm text-gray-500">Par ${artisan.name}</span>
                                    <button class="text-blue-600 hover:text-blue-700">
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    catalogue.innerHTML += card; // Ajouter la carte au catalogue
                });
            });
        }

        // Vérifier si l'utilisateur est authentifié
        document.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('user'));

            if (!user || user.userType !== 'artisan') {
                window.location.href = 'register.html'; // Rediriger vers la page de connexion
            } else {
                genererCatalogue(); // Générer le catalogue une fois la page chargée
            }
        });

        // Gérer la déconnexion
        document.getElementById('logout').addEventListener('click', () => {
            localStorage.removeItem('user');
            window.location.href = 'register.html';
        });
    </script>
</body>
</html>